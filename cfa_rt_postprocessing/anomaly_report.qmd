---
title: "Rt Anomaly Report"
format:
    html:
        code-fold: true
jupyter: python3
---

```{python}
#| tags: [parameters]

# https://quarto.org/docs/computations/parameters.html
summary_file = ""
samples_file = ""
disease = ""
```
```{python}
# Ensure input parameters have been handed in
if summary_file == "":
    raise ValueError("No paramenter handed in for summary file location")

if samples_file == "":
    raise ValueError("No paramenter handed in for samples file location")

if disease == "":
    raise ValueError("No disease paramenter handed in")
```

# Rt Plots

```{python}
import matplotlib
import matplotlib.pyplot as plt
import polars as pl

from plotting.rt import plot_rt


# A nice set of defaults for the plot style
plt.style.use("style.mplstyle")

# Do this to get rid of warning that pops up when plotting more than 20 at once.
# They do this to help make sure you don't run out of RAM, so I added a call to
# plt.close() at the end to ensure we do close things up and reduce RAM once we've
# plotted everything.
matplotlib.rcParams["figure.max_open_warning"] = 52

summary = pl.read_parquet(summary_file)

# Gather the set of unique states
states: list[str] = summary.get_column("geo_value").unique().sort().to_list()

# Plot each state
for state in states:
    plot_rt(summary, state, disease)


plt.close()
```
